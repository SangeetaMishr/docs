> ### **3 minute read &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `Advanced`**

**ChatGPT is enhancing Glific by providing advanced conversational capabilities, improving communication and engagement with beneficiaries.**

## Using ChatGPT within Glific.

**Step 1:** Import the below sample flow from the Flow screen and click on `setting` icon to configure it.

**Sample Flow**

[GPTintegration.json](https://storage.googleapis.com/cc-tides/GPTintegration%20(2).json)

**Step 2:** Click on `Flows` from the left panel and click on the setting icon to configure flow. Here's how the imported flow would look like

<img width="1100" alt="GPTflow" src="https://github.com/glific/docs/assets/40158831/3b73c25e-3bb3-44f4-9b8b-2fce8760a7cf">

**Step 3:** The first node is the `Send Message` node, which prompts contact to ask question which will then be sent to ChatGPT using `Call Webhook` in `Step 6`

**Step 4:** The second node is the `Wait for Response` node with the result name `gpt_query`. The response from the contact will be saved in this result and can be referenced as `@results.gpt_query`.

<img width="1100" alt="waitforresponse" src="https://github.com/glific/docs/assets/40158831/a91c2a31-55b7-4fea-a8f5-ffd8a914f942">

**Step 5:** The third node is the `Send Message` which we are sending to contact while we are sending user query to ChatGPT and waiting for the response.

![step4](https://github.com/glific/docs/assets/90472056/2fb9f69d-5db1-4d53-b3ab-46646d7bd20f)

**Step 6:** Next in `Call Webhook` node we are calling [Jugalbandi](https://www.jugalbandi.ai/) APIs by choosing `FUNCTION` in node and adding value as `jugalbandi.`

<img width="1100" alt="webhook" src="https://user-images.githubusercontent.com/32592458/212661350-bf2ce325-4fbf-4882-b947-10f7eb660f3f.png">

When invoking a webhook, the initial step is to select a suitable HTTP method, such as `POST`, `GET`, or `PATCH`, to perform the desired function in the interaction between the caller and the Jugalbandi API.

The function is then called with three key-value pairs as function body

`url:` url depends on which model we use to process response as Jugalbandi offers 

1. GPT3.5: `https://api.jugalbandi.ai/query-with-langchain-gpt3-5`
1. GPT4: `https://api.jugalbandi.ai/query-with-langchain-gpt4`
1. Langchain: `https://api.jugalbandi.ai/query-with-langchain`
1. GPTindex: `https://api.jugalbandi.ai/query-with-gptindex`

`uuid_number:` The "uuid_number" is a special code assigned to a file when it is uploaded through the  [jugalbandi API](https://api.jugalbandi.ai/docs#/Document%20Store/upload_files_upload_files_post)  then this `uuid` is used to find the relevant information from the knowledge base and gives it back to you.

`query_string:` user query asked in flow

Additionally, you can use [Google sheet](https://glific.github.io/docs/docs/Product%20Features/Flows/Flow%20Actions/Link%20Google%20Sheets/) feature to store response into google sheet as this data can later be analyzed to evaluate each model's accuracy and effectiveness and help you make a decision.

Using the [webhook logs](https://glific.github.io/docs/docs/Product%20Features/Flows/Flow%20Actions/Call%20a%20webhook/#checking-webhook-logs), you can view the logs of questions asked and responses received by ChatGPT.

**Step 7:** In the last step, the user is provided with their answer using the variable `@results.jugalbandi.answer`. This variable contains the response generated by the ChatGPT from custom knowledgebase, leveragin jugalbandi APIs